{
  "hash": "3963ce0feaebc3a88fe467e27376dd57",
  "result": {
    "markdown": "---\ntitle: \"Taylor Swift's Tour in the Pantheon of Music\"\nformat: html\ntitle-block-banner: images/hero.png\n---\n\n\n# Taylor Swift's Tour in the Pantheon of Music\n\n## Introduction\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum.\n\n::: {.column-margin}\n<iframe style=\"border-radius:12px\" src=\"https://open.spotify.com/embed/playlist/37i9dQZF1DX5KpP2LN299J?utm_source=generator\" width=\"100%\" height=\"352\" frameBorder=\"0\" allowfullscreen=\"\" allow=\"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture\" loading=\"lazy\"></iframe>\n:::\n\n## The Eras Tour\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. Aliquam sit amet ipsum ut nisl gravida molestie. Morbi orci tortor, dapibus a dictum vitae, congue sit amet lorem. Praesent purus risus, auctor ac neque sed, interdum feugiat erat. Fusce gravida pellentesque lacus, eget sodales elit sodales vitae. Nunc porttitor pulvinar bibendum. \n\n### Setting the stage\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. \n\n### Attendance\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula. \n\n#### How many people attended the Eras tour\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n#### How many cities and states did Taylor Swift hold a concert in\n\n::: {.content-visible when-profile=\"r\"}\n\n<details><summary>See R code</summary>\n\n::: {.callout-tip}\n## The Eras Tour Dates and Venues\n\n::: {.cell}\n\n```{.r .cell-code}\n# To clean data\nlibrary(tidyverse)\nlibrary(janitor)\n\n# To scrape data\nlibrary(rvest)\nlibrary(httr)\nlibrary(polite)\n\n# To geocode data\nlibrary(tidygeocoder)\n\n# To visualize data\nlibrary(leaflet)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <-\n  \"https://www.sportskeeda.com/pop-culture/taylor-swift-2023-the-eras-tour-ticket-cities-and-dates\"\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nurl_bow <- polite::bow(url)\nurl_bow\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<polite session> https://www.sportskeeda.com/pop-culture/taylor-swift-2023-the-eras-tour-ticket-cities-and-dates\n    User-agent: polite R package\n    robots.txt: 41 rules are defined for 4 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nind_html <-\n  polite::scrape(url_bow) %>%  # scrape web page\n  rvest::html_nodes(\"tbody\") %>% # pull out specific table\n  rvest::html_table(fill = TRUE) %>% \n  bind_rows() %>% \n  row_to_names(row_number = 1) %>% \n  clean_names()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nind_html_geo <-\n  ind_html %>% \n  geocode(venue, method = 'osm', lat = latitude , long = longitude)\n\nind_html_geo <-\n  ind_html_geo %>% \n  mutate(latitude = case_when(venue == \"Empower Field at Mile Hi\" ~ 39.74359,\n                              venue == \"Johan Cruyff Arena\" ~ 52.3143,\n                              .default = latitude),\n         longitude = case_when(venue == \"Empower Field at Mile Hi\" ~ -105.01968,\n                              venue == \"Johan Cruyff Arena\" ~ 4.94187,\n                              .default = longitude))\n```\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet() %>%\n  addProviderTiles(\"CartoDB.Positron\",\n                   group = \"CartoDB.Positron\") %>%\n  addMarkers(\n    data = ind_html_geo,\n    label = paste(\n      \"Venue: \",\n      ind_html_geo$venue,\n      \"<br>\",\n      \"City: \",\n      ind_html_geo$city,\n      \"<br>\",\n      \"Date: \",\n      ind_html_geo$date\n    ) %>%\n      lapply(htmltools::HTML)\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nAssuming \"longitude\" and \"latitude\" are longitude and latitude, respectively\n```\n\n\n:::\n:::\n\n:::\n</details>\n\n\n\n:::\n\n:::{.column-page}\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nAssuming \"longitude\" and \"latitude\" are longitude and latitude, respectively\n```\n\n\n:::\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-517a2bd3475e5f1135f0\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-517a2bd3475e5f1135f0\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addProviderTiles\",\"args\":[\"CartoDB.Positron\",null,\"CartoDB.Positron\",{\"errorTileUrl\":\"\",\"noWrap\":false,\"detectRetina\":false}]},{\"method\":\"addMarkers\",\"args\":[[33.52779565,40.7220528,33.52779565,36.09083455,36.09083455,32.74785025,32.74785025,32.74785025,27.97597925,27.97597925,27.97597925,29.6848581,29.6848581,29.6848581,33.7554123,33.7554123,33.7554123,36.16652355,36.16652355,36.16652355,39.9009099,39.9009099,39.9009099,42.0912526,42.0912526,42.0912526,40.81352375,40.81352375,40.81352375,41.86245145,41.86245145,41.86245145,42.33995675,42.33995675,40.44671645,40.44671645,44.97361545,44.97361545,39.0954645,39.0954645,39.0751128,39.0751128,39.74359,39.74359,47.5953459,47.5953459,37.40315825,37.40315825,33.95340735,33.95340735,33.95340735,33.95340735,33.95340735,19.4051104,19.4051104,19.4051104,-25.3049443,-25.3049443,-25.3049443,-22.893194,-22.893194,-22.893194,-23.52749715,-23.52749715,-23.52749715,35.70557055,35.70557055,35.70557055,35.70557055,-37.819909,-37.819909,-37.819909,-33.8471082,-33.8471082,-33.8471082,-33.8471082,1.30449095,1.30449095,1.30449095,1.30449095,1.30449095,1.30449095,48.89567665,48.89567665,48.89567665,48.89567665,59.37250385,59.37250385,59.37250385,38.7526893,38.7526893,40.4530225,45.7653624,45.7653624,55.9421085,55.9421085,55.9421085,53.4308358,53.4308358,53.4308358,51.4782953,51.55606945,51.55606945,51.55606945,53.3352331,53.3352331,53.3352331,52.3143,52.3143,52.3143,47.3811043,47.3811043,45.47820034999999,45.47820034999999,51.55459375,51.55459375,51.55459375,53.5871535,53.5871535,52.5145846,52.5145846,52.2399367,52.2399367,52.2399367,48.2071637,48.2071637,48.2071637,51.55606945,51.55606945,51.55606945,25.95790315,25.95790315,25.95790315,29.9510489,29.9510489,29.9510489,39.7590621,39.7590621,39.7590621,43.64165985,43.64165985,43.64165985,43.64165985,43.64165985,43.64165985],[-112.2626719026433,-73.9575486,-112.2626719026433,-115.183432066718,-115.183432066718,-97.09283370737742,-97.09283370737742,-97.09283370737742,-82.50421799673616,-82.50421799673616,-82.50421799673616,-95.41080145326987,-95.41080145326987,-95.41080145326987,-84.40084932004368,-84.40084932004368,-84.40084932004368,-86.77131480177009,-86.77131480177009,-86.77131480177009,-75.16748915605905,-75.16748915605905,-75.16748915605905,-71.26446461059069,-71.26446461059069,-71.26446461059069,-74.07340074891175,-74.07340074891175,-74.07340074891175,-87.61671514704074,-87.61671514704074,-87.61671514704074,-83.04561657403696,-83.04561657403696,-80.01575493349428,-80.01575493349428,-93.25746628273055,-93.25746628273055,-84.5160488350198,-84.5160488350198,-78.191289,-78.191289,-105.01968,-105.01968,-122.3316443119611,-122.3316443119611,-121.9698314442558,-121.9698314442558,-118.3390098102559,-118.3390098102559,-118.3390098102559,-118.3390098102559,-118.3390098102559,-99.0957045,-99.0957045,-99.0957045,-57.59808409129378,-57.59808409129378,-57.59808409129378,-43.29356908690929,-43.29356908690929,-43.29356908690929,-46.67852807811731,-46.67852807811731,-46.67852807811731,139.7519704907081,139.7519704907081,139.7519704907081,139.7519704907081,144.9832250066775,144.9832250066775,144.9832250066775,151.0633848446937,151.0633848446937,151.0633848446937,151.0633848446937,103.8743437185173,103.8743437185173,103.8743437185173,103.8743437185173,103.8743437185173,103.8743437185173,2.229658055848475,2.229658055848475,2.229658055848475,2.229658055848475,18.00166723894346,18.00166723894346,18.00166723894346,-9.184689881825172,-9.184689881825172,-3.687405673758865,4.982054311073671,4.982054311073671,-3.241161216394731,-3.241161216394731,-3.241161216394731,-2.960909541416529,-2.960909541416529,-2.960909541416529,-3.183704698089148,-0.2796033937940144,-0.2796033937940144,-0.2796033937940144,-6.228178471465226,-6.228178471465226,-6.228178471465226,4.94187,4.94187,4.94187,8.5039155,8.5039155,9.123963993342393,9.123963993342393,7.06760006899412,7.06760006899412,7.06760006899412,9.898705553686273,9.898705553686273,13.23981441775628,13.23981441775628,21.04528769961571,21.04528769961571,21.04528769961571,16.41964256618482,16.41964256618482,16.41964256618482,-0.2796033937940144,-0.2796033937940144,-0.2796033937940144,-80.23884973967523,-80.23884973967523,-80.23884973967523,-90.08230762538903,-90.08230762538903,-90.08230762538903,-86.16383761053042,-86.16383761053042,-86.16383761053042,-79.38919761915824,-79.38919761915824,-79.38919761915824,-79.38919761915824,-79.38919761915824,-79.38919761915824],null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},null,null,null,null,[\"Venue:  State Farm Stadium <br> City:  Glendale, AZ <br> Date:  March 17\",\"Venue:  Brooklyn Bowl <br> City:  Philadelphia, PA <br> Date:  March 18 (12 PM)\",\"Venue:  State Farm Stadium <br> City:  Glendale, AZ <br> Date:  March 18 (6:30 PM)\",\"Venue:  Allegiant Stadium <br> City:  Las Vegas, NV <br> Date:  March 24\",\"Venue:  Allegiant Stadium <br> City:  Las Vegas, NV <br> Date:  March 25\",\"Venue:  AT&T Stadium <br> City:  Arlington, TX <br> Date:  March 31\",\"Venue:  AT&T Stadium <br> City:  Arlington, TX <br> Date:  April 01\",\"Venue:  AT&T Stadium <br> City:  Arlington, TX <br> Date:  April 02\",\"Venue:  Raymond James Stadium <br> City:  Tampa, FL <br> Date:  April 13\",\"Venue:  Raymond James Stadium <br> City:  Tampa, FL <br> Date:  April 14\",\"Venue:  Raymond James Stadium <br> City:  Tampa, FL <br> Date:  April 15\",\"Venue:  NRG Stadium <br> City:  Houston, TX <br> Date:  April 21\",\"Venue:  NRG Stadium <br> City:  Houston, TX <br> Date:  April 22\",\"Venue:  NRG Stadium <br> City:  Houston, TX <br> Date:  April 23\",\"Venue:  Mercedes-Benz Stadium <br> City:  Atlanta, GA <br> Date:  April 28\",\"Venue:  Mercedes-Benz Stadium <br> City:  Atlanta, GA <br> Date:  April 29\",\"Venue:  Mercedes-Benz Stadium <br> City:  Atlanta, GA <br> Date:  April 30\",\"Venue:  Nissan Stadium <br> City:  Nashville, TN <br> Date:  May 05\",\"Venue:  Nissan Stadium <br> City:  Nashville, TN <br> Date:  May 06\",\"Venue:  Nissan Stadium <br> City:  Nashville, TN <br> Date:  May 07\",\"Venue:  Lincoln Financial Field <br> City:  Philadelphia, PA <br> Date:  May 12\",\"Venue:  Lincoln Financial Field <br> City:  Philadelphia, PA <br> Date:  May 13\",\"Venue:  Lincoln Financial Field <br> City:  Philadelphia, PA <br> Date:  May 14\",\"Venue:  Gillette Stadium <br> City:  Foxborough, MA <br> Date:  May 19\",\"Venue:  Gillette Stadium <br> City:  Foxborough, MA <br> Date:  May 20\",\"Venue:  Gillette Stadium <br> City:  Foxborough, MA <br> Date:  May 21\",\"Venue:  MetLife Stadium <br> City:  East Rutherford, NJ <br> Date:  May 26\",\"Venue:  MetLife Stadium <br> City:  East Rutherford, NJ <br> Date:  May 27\",\"Venue:  MetLife Stadium <br> City:  East Rutherford, NJ <br> Date:  May 28\",\"Venue:  Soldier Field <br> City:  Chicago, IL <br> Date:  June 02\",\"Venue:  Soldier Field <br> City:  Chicago, IL <br> Date:  June 03\",\"Venue:  Soldier Field <br> City:  Chicago, IL <br> Date:  June 04\",\"Venue:  Ford Field <br> City:  Detroit, MI <br> Date:  June 09\",\"Venue:  Ford Field <br> City:  Detroit, MI <br> Date:  June 10\",\"Venue:  Acrisure Stadium <br> City:  Pittsburgh, PA <br> Date:  June 16\",\"Venue:  Acrisure Stadium <br> City:  Pittsburgh, PA <br> Date:  June 17\",\"Venue:  US Bank Stadium <br> City:  Minneapolis, MN <br> Date:  June 23\",\"Venue:  US Bank Stadium <br> City:  Minneapolis, MN <br> Date:  June 24\",\"Venue:  Paycor Stadium <br> City:  Cincinnati, OH <br> Date:  June 30\",\"Venue:  Paycor Stadium <br> City:  Cincinnati, OH <br> Date:  July 01\",\"Venue:  Arrowhead Stadium <br> City:  Kansas City, MO <br> Date:  July 07\",\"Venue:  Arrowhead Stadium <br> City:  Kansas City, MO <br> Date:  July 08\",\"Venue:  Empower Field at Mile Hi <br> City:  Denver, CO <br> Date:  July 14\",\"Venue:  Empower Field at Mile Hi <br> City:  Denver, CO <br> Date:  July 15\",\"Venue:  Lumen Field <br> City:  Seattle, WA <br> Date:  July 22\",\"Venue:  Lumen Field <br> City:  Seattle, WA <br> Date:  July 23\",\"Venue:  Levi’s Stadium <br> City:  Santa Clara, CA <br> Date:  July 28\",\"Venue:  Levi’s Stadium <br> City:  Santa Clara, CA <br> Date:  July 29\",\"Venue:  SoFi Stadium <br> City:  Inglewood, CA <br> Date:  August 03\",\"Venue:  SoFi Stadium <br> City:  Inglewood, CA <br> Date:  August 04\",\"Venue:  SoFi Stadium <br> City:  Inglewood, CA <br> Date:  August 05\",\"Venue:  SoFi Stadium <br> City:  Inglewood, CA <br> Date:  August 08\",\"Venue:  SoFi Stadium <br> City:  Inglewood, CA <br> Date:  August 09\",\"Venue:  Foro Sol <br> City:  Mexico City <br> Date:  August 24\",\"Venue:  Foro Sol <br> City:  Mexico City <br> Date:  August 25\",\"Venue:  Foro Sol <br> City:  Mexico City <br> Date:  August 26\",\"Venue:  Estadio River Plate <br> City:  Buenos Aires <br> Date:  November 9\",\"Venue:  Estadio River Plate <br> City:  Buenos Aires <br> Date:  November 10\",\"Venue:  Estadio River Plate <br> City:  Buenos Aires <br> Date:  November 11\",\"Venue:  Estádio Olímpico Nilton Santos <br> City:  Rio de Janeiro <br> Date:  November 17\",\"Venue:  Estádio Olímpico Nilton Santos <br> City:  Rio de Janeiro <br> Date:  November 18\",\"Venue:  Estádio Olímpico Nilton Santos <br> City:  Rio de Janeiro <br> Date:  November 19\",\"Venue:  Allianz Parque <br> City:  São Paulo <br> Date:  November 24\",\"Venue:  Allianz Parque <br> City:  São Paulo <br> Date:  November 25\",\"Venue:  Allianz Parque <br> City:  São Paulo <br> Date:  November 26\",\"Venue:  Tokyo Dome <br> City:  Tokyo <br> Date:  February 7\",\"Venue:  Tokyo Dome <br> City:  Tokyo <br> Date:  February 8\",\"Venue:  Tokyo Dome <br> City:  Tokyo <br> Date:  February 9\",\"Venue:  Tokyo Dome <br> City:  Tokyo <br> Date:  February 10\",\"Venue:  Melbourne Cricket Ground <br> City:  Melbourne <br> Date:  February 16\",\"Venue:  Melbourne Cricket Ground <br> City:  Melbourne <br> Date:  February 17\",\"Venue:  Melbourne Cricket Ground <br> City:  Melbourne <br> Date:  February 18\",\"Venue:  Accor Stadium <br> City:  Sydney <br> Date:  February 23\",\"Venue:  Accor Stadium <br> City:  Sydney <br> Date:  February 24\",\"Venue:  Accor Stadium <br> City:  Sydney <br> Date:  February 25\",\"Venue:  Accor Stadium <br> City:  Sydney <br> Date:  February 26\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 2\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 3\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 4\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 7\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 8\",\"Venue:  Singapore National Stadium <br> City:  Singapore <br> Date:  March 9\",\"Venue:  Paris La Défense Arena <br> City:  Nanterre <br> Date:  May 9\",\"Venue:  Paris La Défense Arena <br> City:  Nanterre <br> Date:  May 10\",\"Venue:  Paris La Défense Arena <br> City:  Nanterre <br> Date:  May 11\",\"Venue:  Paris La Défense Arena <br> City:  Nanterre <br> Date:  May 12\",\"Venue:  Friends Arena <br> City:  Stockholm <br> Date:  May 17\",\"Venue:  Friends Arena <br> City:  Stockholm <br> Date:  May 18\",\"Venue:  Friends Arena <br> City:  Stockholm <br> Date:  May 19\",\"Venue:  Estádio da Luz <br> City:  Lisbon <br> Date:  May 24\",\"Venue:  Estádio da Luz <br> City:  Lisbon <br> Date:  May 25\",\"Venue:  Santiago Bernabéu Stadium <br> City:  Madrid <br> Date:  May 30\",\"Venue:  Groupama Stadium <br> City:  Décines-Charpieu <br> Date:  June 2\",\"Venue:  Groupama Stadium <br> City:  Décines-Charpieu <br> Date:  June 3\",\"Venue:  Murrayfield Stadium <br> City:  Edinburgh <br> Date:  June 7\",\"Venue:  Murrayfield Stadium <br> City:  Edinburgh <br> Date:  June 8\",\"Venue:  Murrayfield Stadium <br> City:  Edinburgh <br> Date:  June 9\",\"Venue:  Anfield <br> City:  Liverpool <br> Date:  June 13\",\"Venue:  Anfield <br> City:  Liverpool <br> Date:  June 14\",\"Venue:  Anfield <br> City:  Liverpool <br> Date:  June 15\",\"Venue:  Principality Stadium <br> City:  Cardiff <br> Date:  June 18\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  June 21\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  June 22\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  June 23\",\"Venue:  Aviva Stadium <br> City:  Dublin <br> Date:  June 28\",\"Venue:  Aviva Stadium <br> City:  Dublin <br> Date:  June 29\",\"Venue:  Aviva Stadium <br> City:  Dublin <br> Date:  June 30\",\"Venue:  Johan Cruyff Arena <br> City:  Amsterdam <br> Date:  July 4\",\"Venue:  Johan Cruyff Arena <br> City:  Amsterdam <br> Date:  July 5\",\"Venue:  Johan Cruyff Arena <br> City:  Amsterdam <br> Date:  July 6\",\"Venue:  Letzigrund <br> City:  Zürich <br> Date:  July 9\",\"Venue:  Letzigrund <br> City:  Zürich <br> Date:  July 10\",\"Venue:  San Siro <br> City:  Milan <br> Date:  July 13\",\"Venue:  San Siro <br> City:  Milan <br> Date:  July 14\",\"Venue:  Veltins-Arena <br> City:  Gelsenkirchen <br> Date:  July 17\",\"Venue:  Veltins-Arena <br> City:  Gelsenkirchen <br> Date:  July 18\",\"Venue:  Veltins-Arena <br> City:  Gelsenkirchen <br> Date:  July 19\",\"Venue:  Volksparkstadion <br> City:  Hamburg <br> Date:  July 23\",\"Venue:  Volksparkstadion <br> City:  Hamburg <br> Date:  July 24\",\"Venue:  Olympiastadion <br> City:  Munich <br> Date:  July 27\",\"Venue:  Olympiastadion <br> City:  Munich <br> Date:  July 28\",\"Venue:  PGE Narodowy <br> City:  Warsaw <br> Date:  August 1\",\"Venue:  PGE Narodowy <br> City:  Warsaw <br> Date:  August 2\",\"Venue:  PGE Narodowy <br> City:  Warsaw <br> Date:  August 3\",\"Venue:  Ernst-Happel-Stadion <br> City:  Vienna <br> Date:  August 8\",\"Venue:  Ernst-Happel-Stadion <br> City:  Vienna <br> Date:  August 9\",\"Venue:  Ernst-Happel-Stadion <br> City:  Vienna <br> Date:  August 10\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  August 15\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  August 16\",\"Venue:  Wembley Stadium <br> City:  London <br> Date:  August 17\",\"Venue:  Hard Rock Stadium <br> City:  Miami Gardens <br> Date:  October 18\",\"Venue:  Hard Rock Stadium <br> City:  Miami Gardens <br> Date:  October 19\",\"Venue:  Hard Rock Stadium <br> City:  Miami Gardens <br> Date:  October 20\",\"Venue:  Caesars Superdome <br> City:  New Orleans <br> Date:  October 25\",\"Venue:  Caesars Superdome <br> City:  New Orleans <br> Date:  October 26\",\"Venue:  Caesars Superdome <br> City:  New Orleans <br> Date:  October 27\",\"Venue:  Lucas Oil Stadium <br> City:  Indianapolis <br> Date:  November 1\",\"Venue:  Lucas Oil Stadium <br> City:  Indianapolis <br> Date:  November 2\",\"Venue:  Lucas Oil Stadium <br> City:  Indianapolis <br> Date:  November 3\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 14\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 15\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 16\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 21\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 22\",\"Venue:  Rogers Centre <br> City:  Toronto <br> Date:  November 23\"],{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[-37.819909,59.37250385],\"lng\":[-122.3316443119611,151.0633848446937]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n:::\n\n#### Eras tour compared to her previous tours\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n### Revenue\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n#### Annual highest-grossing tours\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus eget sem in leo pharetra rhoncus in a felis. Etiam ligula elit, euismod in gravida in, fermentum sed ligula.\n\n::: {.content-visible when-profile=\"r\"}\n\n<details><summary>See R code</summary>\n\n::: {.callout-tip}\n## Highest-grossing tours of all time visualization\n\nLet's get started by loading the necessary R packages to clean, scrape, and visualize the data. These packages are the building blocks of our data scraping journey.\n\n::: {.cell}\n\n```{.r .cell-code}\n# To clean data\nlibrary(tidyverse)\nlibrary(janitor)\n\n# To scrape data\nlibrary(rvest)\nlibrary(httr)\nlibrary(polite)\n\n# To visualize data\nlibrary(ggplot2)\nlibrary(showtext)\nlibrary(viridis)\n\nfont_add_google(\"Open Sans\", \"open-sans\")\nshowtext::showtext_auto()\n```\n:::\n\nNow that we have the necessary libraries loaded, it's time to politely scrape data from Wikipedia and bring it into R. We'll start by specifying the URL of the Wikipedia page we want to extract data from:\n\n::: {.cell}\n\n```{.r .cell-code}\nurl <-\n  \"https://en.wikipedia.org/wiki/List_of_highest-grossing_concert_tours\"\n```\n:::\n\nNext, we'll use the polite package to create a 'bag of words' (bow) representation of the URL. This step helps us make a polite request to the web server for the page's content:\n\n::: {.cell}\n\n```{.r .cell-code}\nurl_bow <- polite::bow(url)\nurl_bow\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<polite session> https://en.wikipedia.org/wiki/List_of_highest-grossing_concert_tours\n    User-agent: polite R package\n    robots.txt: 456 rules are defined for 33 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n\n\n:::\n:::\n\nOnce we have our 'bow,' we can use it to scrape the web page. We'll specifically target the tables with the class 'wikitable' on the page:\n\n::: {.cell}\n\n```{.r .cell-code}\nind_html <-\n  polite::scrape(url_bow) %>%  # scrape web page\n  rvest::html_nodes(\"table.wikitable\") %>% # pull out specific table\n  rvest::html_table(fill = TRUE) \n```\n:::\n\nFinally, we'll clean up the extracted table (the second table on the page, Top 20 highest-grossing tours of all time) by storing it in the `ind_tab` variable and ensuring that column names are in a consistent format:\n\n::: {.cell}\n\n```{.r .cell-code}\nind_tab <- \n  ind_html[[2]] %>% \n  clean_names()\n```\n:::\n\nThis code segment efficiently fetches and prepares the data we need from the Wikipedia page. Our next step is to clean it for analysis. In this code snippet, we'll perform some essential data cleaning tasks to make our dataset ready for exploration: transforming the Adjusted Gross in 2022 Dollars, Actual Gross, and Average Gross columns into numeric variables.\n\n::: {.cell}\n\n```{.r .cell-code}\nind_tab_clean <-\n  ind_tab %>%\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollars,\n      actual_gross,\n      averagegross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  ))\n```\n:::\n\nWe want to add Taylor's data\n\n::: {.cell}\n\n```{.r .cell-code}\nind_tab_tay <-\n  ind_tab_clean %>% \n  add_row(artist = \"Taylor Swift\",\n          tour_title = \"The Eras Tour (Expected)\",\n          year_s = \"2023-2024\",\n          shows = 146,\n          adjusted_gross_in_2022_dollars = 1400000000)\n```\n:::\n\n\nNow that our data is clean and ready, let's visualize the highest-grossing concert tours of all time (as of 2023) using a bar chart. We'll use the ggplot2 package\n\n::: {.cell}\n\n```{.r .cell-code}\nind_tab_tay %>%\n  mutate(color = case_when(artist == \"Taylor Swift\" ~ \"#C2D9D9\",\n                          .default = \"#122B2B\")) %>% \n  ggplot(aes(\n    x = forcats::fct_reorder(tour_title, adjusted_gross_in_2022_dollars),\n    y = adjusted_gross_in_2022_dollars\n  )) +\n  geom_col(aes(fill = color),\n           color = \"#122B2B\",\n           width= .9) +\n  scale_fill_identity() +\n  labs(title = \"Highest-grossing tours of all time\",\n       subtitle = \"(as of 2023)\") +\n  theme(\n    text = element_text(size = 9,\n                        family = \"open-sans\"),\n    title = element_text(size = 16,\n                              face = \"bold\",\n                              family = \"open-sans\"),\n    subtitle = element_text(size = 12,\n                                 family = \"open-sans\")\n  ) +\n  geom_text(aes(y = 12000000, label = tour_title),\n  family = \"open-sans\",\n  hjust = 0,\n  vjust = 0.5,\n  size = 3,\n  color = \"white\",\n  fontface = \"bold\") +\n    geom_text(aes(y = 12000000, label = ifelse(artist == \"Taylor Swift\", tour_title, \"\")),\n  family = \"open-sans\",\n  hjust = 0,\n  vjust = 0.5,\n  size = 3,\n  color = \"black\",\n  fontface = \"bold\") +\n  geom_text(aes(\n    label = scales::dollar(\n      adjusted_gross_in_2022_dollars,\n      accuracy = 1,\n      scale = 1e-6,\n      suffix = \"M\"\n    )\n  ),\n  family = \"open-sans\",\n  hjust = -0.1,\n  vjust = 0.5,\n  size = 3) +\n  coord_flip() +\n  scale_y_continuous(limits = c(0, 1500000000)) +\n  theme_void()\n```\n:::\n\n:::\n</details>\n\n\n\n:::\n\n::: {.cell-output-display}\n![](images/highest-grossing-tours-r-1.png){width=1344}\n:::\n\n\n\n#### Number of shows vs. income\n\n\n::: {.cell}\n\n```{.r .cell-code}\nannual_hi_gross_tours <-\n  ind_html[[9]] %>%\n  clean_names()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nannual_hi_gross_tours_clean <-\n  annual_hi_gross_tours %>%\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollar,\n      actual_gross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  ),\n  year = lubridate::ymd(year, truncated = 2L),\n  decade = as.factor(floor_date(year, years(10))))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nannual_hi_gross_tours_clean %>%\n  ggplot(aes(\n    x = year,\n    y = adjusted_gross_in_2022_dollar,\n    size =  shows,\n    fill = decade\n  )) +\n  geom_point(alpha = 0.5,\n             shape = 21,\n             color = \"black\") +\n  scale_size(range = c(.1, 8)) +\n  scale_fill_viridis(discrete = TRUE, guide = FALSE, option = \"A\") +\n  theme_minimal() +\n  theme(legend.position = \"none\") +\n  labs(title = \"Annual highest-grossing tours\")\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n# Highest-grossing tours by decade\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncombine_data <- function(ind_html_list) {\n  # Initialize an empty tibble\n  combined_data <- tibble()\n  \n  # Loop through the ind_html_list and append each element to the combined_data\n  for (i in 4:8) {\n    extracted_data <- ind_html_list[[i]] %>% clean_names()\n    combined_data <- bind_rows(combined_data, extracted_data)\n  }\n  \n  return(combined_data)\n}\n\nannual_hi_gross_tours <- combine_data(ind_html)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntours_by_decade <-\n  annual_hi_gross_tours %>%\n  dplyr::mutate(across(\n    c(adjusted_gross_in_2022_dollar,\n      averagegross,\n      actual_gross),\n    ~ as.numeric(str_replace_all(.x, \"[$,]\", \"\"))\n  )) %>%\n     add_row(artist = \"Taylor Swift\",\n          tour_title = \"The Eras Tour (Expected)\",\n          year_s = \"2023-2024\",\n          shows = 146,\n          adjusted_gross_in_2022_dollar = 1400000000) %>% \n  mutate(\n    start_year = str_sub(year_s, start = 1, end = 4),\n    year = lubridate::ymd(start_year, truncated = 2L)) %>% \n  mutate(decade = as.factor(floor_date(year, years(10))))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ng1 <- subset(tours_by_decade, tour_title == \"The Eras Tour (Expected)\")\n\ntours_by_decade %>%\n  ggplot(aes(\n    x = year,\n    y = adjusted_gross_in_2022_dollar,\n    size =  shows,\n    fill = decade\n  )) +\n  geom_point(alpha = 0.5,\n             shape = 21,\n             color = \"black\") +\n  scale_size(range = c(.1, 8)) +\n  scale_fill_viridis(discrete = TRUE,\n                     guide = FALSE,\n                     option = \"G\") +\n  theme_minimal() +\n  geom_point(data = g1, colour = \"#122B2B\") +\n  geom_text(\n    data = g1,\n    label = \"Taylor Swift\",\n    vjust = 2.4,\n    size = 3\n  ) +\n  theme(legend.position = \"none\") +\n  labs(title = \"Highest-grossing tours by decade\") +\n  scale_x_date(limits = c(ymd(\"1980-01-01\"), ymd(\"2028-01-01\")))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntours_by_decade %>% \n  ggplot(aes(x = shows, y = adjusted_gross_in_2022_dollar)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntours_by_decade %>% \n  ggplot(aes(x = shows, y = adjusted_gross_in_2022_dollar)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nurl2 <- \"https://en.wikipedia.org/wiki/List_of_most-attended_concert_tours\"\nurl_bow2 <- polite::bow(url2)\nurl_bow2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<polite session> https://en.wikipedia.org/wiki/List_of_most-attended_concert_tours\n    User-agent: polite R package\n    robots.txt: 456 rules are defined for 33 bots\n   Crawl delay: 5 sec\n  The path is scrapable for this user-agent\n```\n\n\n:::\n\n```{.r .cell-code}\nind_html2 <-\n  polite::scrape(url_bow2) %>%  # scrape web page\n  rvest::html_nodes(\"table.wikitable\") %>% # pull out specific table\n  rvest::html_table(fill = TRUE) \n\nind_tab2 <- \n  ind_html2[[2]] %>% \n  clean_names() %>% \n  mutate(tickets_sold = as.numeric(str_replace(tickets_sold, \" million.*\", \"\")) * 1e6)\n\ntours_by_decade2 <-\n  tours_by_decade %>%\n  mutate(\n    tour_title = case_when(\n      tour_title == \"Music of the Spheres World Tour †\" ~ \"Music of the Spheres World Tour\",\n      tour_title == \"The Garth Brooks World Tour\" ~ \"The Garth Brooks World Tour (1996–1998)\",\n      tour_title == \"Steel Wheels Tour\" ~ \"Steel Wheels/Urban Jungle Tour\",\n      .default = tour_title\n    )\n  )\n\ncost_per <-\n  left_join(ind_tab2, tours_by_decade2, join_by(tour_title))\n\ncost_per %>% \n  mutate(cost_per = adjusted_gross_in_2022_dollar / tickets_sold) %>% \n  ggplot(aes(x = year, y = cost_per)) +\n  geom_point()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 1 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n\n\n## Locations of Taylor Swift Tours\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/leaflet-binding-2.2.0/leaflet.js\"></script>\n<script src=\"site_libs/leaflet-providers-1.13.0/leaflet-providers_1.13.0.js\"></script>\n<script src=\"site_libs/leaflet-providers-plugin-2.2.0/leaflet-providers-plugin.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}